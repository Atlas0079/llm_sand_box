{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "https://example.com/location.schema.json",
    "title": "Location Template Schema",
    "description": "Describes the structure for defining game locations and their connections.",
    "type": "object",
  
    "patternProperties": {
      "^[a-z0-9_]+$": {
        "$ref": "#/definitions/locationTemplate"
      }
    },
    "additionalProperties": false,
  
    "definitions": {
      "locationTemplate": {
        "type": "object",
        "properties": {
          "name": {
            "description": "The display name of the location.",
            "type": "string"
          },
          "description": {
            "description": "A descriptive text for the location, shown to the player.",
            "type": "string"
          },
          "connections": {
            "description": "A map of all paths leading out of this location.",
            "type": "object",
            "patternProperties": {
              "^[a-z0-9_]+$": {
                "$ref": "#/definitions/pathTemplate"
              }
            },
            "additionalProperties": false
          }
        },
        "required": ["name", "description"]
      },
  
      "pathTemplate": {
        "type": "object",
        "properties": {
          "name": {
            "description": "The display name of the path, e.g., 'A winding forest trail'.",
            "type": "string"
          },
          "target_location": {
            "description": "The ID of the destination location.",
            "type": "string",
            "pattern": "^[a-z0-9_]+$"
          },
          "travel_time": {
            "description": "Base travel time in game minutes.",
            "type": "integer",
            "minimum": 0
          },
          "description": {
            "description": "A more detailed description of the path itself.",
            "type": "string"
          },
          "conditions": {
            "description": "A set of conditions required to use this path.",
            "$ref": "#/definitions/pathConditions"
          }
        },
        "required": ["name", "target_location", "travel_time"]
      },
  
      "pathConditions": {
          "type": "object",
          "properties": {
              "requires_skill": {
                  "description": "Defines skill requirements.",
                  "type": "object",
                  "patternProperties": {
                      "^[A-Z][a-zA-Z]+$": { "type": "integer", "minimum": 1 }
                  }
              },
              "requires_item": {
                  "description": "ID of an item required to pass.",
                  "type": "string"
              },
              "visibility": {
                  "description": "Defines visibility conditions.",
                  "type": "string",
                  "enum": ["day_only", "night_only", "always"]
              }
          },
          "additionalProperties": false
      }
    }
  }